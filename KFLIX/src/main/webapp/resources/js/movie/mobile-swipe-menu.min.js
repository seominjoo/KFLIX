/**
 * @package        mobile-swipe-menu
 * @version        2.1.0
 * @description    Swipe Menu with Vanilla JS for mobile
 * @author         milkamil93
 * @copyright      2021 mobile-swipe-menu
 * @license        GPL-3.0
 * @link           https://github.com/milkamil93/mobile-swipe-menu
*/!function(n){var i={};function o(t){if(i[t])return i[t].exports;var e=i[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=n,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=3)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,n){"use strict";n.r(e);var i=n(1),r=n.n(i),e=n(2),i=n.n(e),e=n(0),h=n.n(e),s=(i()(o,[{key:"set",value:function(t,e){this[t]=e}},{key:"get",value:function(t){return this[t]}},{key:"eventListener",value:function(t){t.addEventListener("mousedown",this.handleTouchStart.bind(this)),t.addEventListener("touchstart",this.handleTouchStart.bind(this)),t.addEventListener("mousemove",this.handleTouchMove.bind(this)),t.addEventListener("touchmove",this.handleTouchMove.bind(this),{passive:!1}),t.addEventListener("mouseup",this.handleTouchEnd.bind(this)),t.addEventListener("touchend",this.handleTouchEnd.bind(this))}},{key:"getTouches",value:function(t){var e={offsetX:0,offsetY:0},n=t.touches?t.touches[0]:!!t.originalEvent&&t.originalEvent.touches[0];return n?(e.offsetX=Math.round(n.clientX),e.offsetY=Math.round(n.clientY)):(e.offsetX=Math.round(t.clientX),e.offsetY=Math.round(t.clientY)),e}},{key:"handleTouchStart",value:function(t){var e=this.getTouches(t);this.set("inWork",!0),this.set("xDown",e.offsetX),this.set("yDown",e.offsetY),this.set("xStart",e.offsetX),this.set("yStart",e.offsetY),this.start(t)}},{key:"handleTouchMove",value:function(t){if(!this.get("inWork"))return!1;var e=this.getTouches(t);this.set("xCurrent",e.offsetX-this.get("xStart")),this.set("yCurrent",e.offsetY-this.get("yStart"));var n=this.get("xDown")-e.offsetX,e=this.get("yDown")-e.offsetY;if(this.get("currentDirection")||this.setDirection(t,n,e),this.drag(t),!this.get("xDown")||!this.get("yDown"))return!1;this.setDirection(t,n,e),this.set("xDown",null),this.set("yDown",null)}},{key:"setDirection",value:function(t,e,n){Math.abs(e)>=Math.abs(n)?0<e?(this.set("currentDirection","left"),this.left(t)):(this.set("currentDirection","right"),this.right(t)):0<n?(this.set("currentDirection","up"),this.up(t)):(this.set("currentDirection","down"),this.down(t))}},{key:"handleTouchEnd",value:function(t){this.set("inWork",!1),this.stop(t)}},{key:"drag",value:function(t){t.target.style.transition="none",t.target.style.transform="translate(".concat(this.get("xCurrent"),"px, ").concat(this.get("yCurrent"),"px)")}},{key:"left",value:function(t){}},{key:"right",value:function(t){}},{key:"up",value:function(t){}},{key:"down",value:function(t){}},{key:"start",value:function(t){}},{key:"stop",value:function(t){}}]),o),i=(i()(l,[{key:"_connectElement",value:function(t){this._element="string"==typeof t?document.querySelector(t):t,this._element.style.height="100%",this._element.style.top="0",this._element.style.zIndex="1000",this._element.style.position="fixed",this._windowWidth=window.innerWidth-this._getScrollWidth(),this._width=this._width||this._windowWidth,this._element.style.width=this._width+"px",this._element.style[this._mode]=-this._width+"px"}},{key:"_createHook",value:function(){var t=document.createElement("div");t.style.width=this._hookWidth+"px",t.style.height="100%",t.style.top="0",t.style.position="absolute",t.style.cursor="pointer","right"===this._mode?t.style.left="-".concat(this._hookWidth,"px"):t.style.right="-".concat(this._hookWidth,"px"),this._element.append(t)}},{key:"_openRightMenu",value:function(){this._transition(),this._element.style.transform="translateX(-".concat(this._width,"px)"),this._isOpened=!0,this._events.opened.bind(this)()}},{key:"_closeRightMenu",value:function(){this._transition(),this._element.style.transform="translateX(0px)",this._isOpened=!1,this._events.closed.bind(this)()}},{key:"_openLeftMenu",value:function(){this._transition(),this._element.style.transform="translateX(".concat(this._width,"px)"),this._isOpened=!0,this._events.opened.bind(this)()}},{key:"_closeLeftMenu",value:function(){this._transition(),this._element.style.transform="translateX(0px)",this._isOpened=!1,this._events.closed.bind(this)()}},{key:"_transition",value:function(){var t=this;this._element.style.transitionDuration="300ms",setTimeout(function(){t._element.style.transitionDuration="0ms"},200)}},{key:"_init",value:function(){var i=this,o=this._element,t=this._enableBodyHook?document.body:this._element;t.style.cursor="auto",t.style["touch-action"]="pan-y",t.style["-ms-touch-action"]="pan-y";t=new s(t);t.start=function(t){if(i._lock&&!i._isOpened)return!1;var e=new WebKitCSSMatrix(getComputedStyle(o).transform).m41,t=this.getTouches(t).offsetX;e&&this.set("xStart",t-e),i._events.start.bind(i)(this)},t.drag=function(t){if(i._lock&&!i._isOpened)return!1;0<=["left","right"].indexOf(this.currentDirection)&&"touchmove"===t.type&&(t.stopImmediatePropagation(),t.stopPropagation(),t.cancelable&&t.preventDefault()),i._events.drag.bind(i)(this);var e=this.get("xCurrent"),n=Math.floor(o.getBoundingClientRect().left)-(i._windowWidth-i._width);if("right"===i._mode)switch(this.currentDirection){case"left":i._width>=n&&(-e>i._width?e=-i._width:0<e&&(e=0),o.style.transform="translateX(".concat(e,"px)"));break;case"right":i._windowWidth>n&&(-e<0?e=0:-e>i._width&&(e=-i._width),o.style.transform="translateX(".concat(e,"px)"))}else if("left"===i._mode)switch(this.currentDirection){case"right":n<0&&(e>i._width?e=i._width:e<=0&&(e=0),o.style.transform="translateX(".concat(e,"px)"));break;case"left":e>=i._width?e=i._width:e<0&&(e=0),o.style.transform="translateX(".concat(e,"px)")}},t.stop=function(){if(i._lock&&!i._isOpened)return!1;var t=Math.floor(o.getBoundingClientRect().left);if("right"===i._mode)switch(t-=i._windowWidth-i._width,this.currentDirection){case"left":t<i._width?t<i._width-30?i._openRightMenu():i._closeRightMenu():o.style.transform="translateX(0px)";break;case"right":0<t?30<t?i._closeRightMenu():i._openRightMenu():o.style.transform="translateX(-".concat(i._width,"px)")}else if("left"===i._mode)switch(this.currentDirection){case"right":-t<i._width?-t<i._width-30?i._openLeftMenu():i._closeLeftMenu():o.style.transform="translateX(0px)";break;case"left":t<0?t<-30?i._closeLeftMenu():i._openLeftMenu():o.style.transform="translateX(".concat(i._width,"px)")}i._events.stop.bind(i)(this)}}},{key:"_getScrollWidth",value:function(){var t,e=this._scrollWidth;return!1===e&&((t=document.createElement("div")).style.overflowY="scroll",t.style.width="50px",t.style.height="50px",document.body.append(t),this._scrollWidth=t.offsetWidth-t.clientWidth,t.remove()),e}},{key:"open",value:function(){this.openMenu()}},{key:"openMenu",value:function(){"right"===this._mode?this._openRightMenu():this._openLeftMenu()}},{key:"close",value:function(){this.closeMenu()}},{key:"closeMenu",value:function(){"right"===this._mode?this._closeRightMenu():this._closeLeftMenu()}},{key:"toggle",value:function(){this.toggleMenu()}},{key:"toggleMenu",value:function(){this._isOpened?this.closeMenu():this.openMenu()}},{key:"disableSwipe",value:function(){this.lock=!0}},{key:"enableSwipe",value:function(){this.lock=!1}}]),l);function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r()(this,l),h()(this,"_mode",void 0),h()(this,"lock",!1),h()(this,"_width",void 0),h()(this,"_hookWidth",void 0),h()(this,"_enableBodyHook",void 0),h()(this,"_scrollWidth",!1),h()(this,"_isOpened",!1),h()(this,"_events",void 0),h()(this,"_element",void 0),h()(this,"_windowWidth",void 0);var n=e.mode,i=void 0===n?"right":n,o=e.width,s=void 0===o?0:o,n=e.hookWidth,o=void 0===n?30:n,n=e.enableBodyHook,n=void 0!==n&&n,e=e.events,e=void 0===e?{}:e;this._mode=i,this._width=s,this._hookWidth=o,this._enableBodyHook=n,this._events=Object.assign({start:function(){},stop:function(){},opened:function(){},closed:function(){},drag:function(){}},e),this._connectElement(t),n||this._createHook(),this._init()}function o(t){r()(this,o),this.inWork=!1,this.xDown=null,this.yDown=null,this.xStart=null,this.yStart=null,this.xCurrent=null,this.yCurrent=null,this.currentDirection=null,"string"==typeof t?document.querySelectorAll(t).forEach(this.eventListener.bind(this)):this.eventListener(t)}window.MobileSwipeMenu=i}]);